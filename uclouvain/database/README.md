# Database

The database for this project is a plain postgres with the 
[pgvector](https://github.com/pgvector/pgvector) extension enabled. The docker
image that is used to provide this service is derived from the one officially 
provided by the pgvector project: `pgvector/pgvector:pg17`. So please refer to
the documentation of that project in case of trouble with the docker image.

## Schema

So far the database schema is quite simplistic: there is one single table 
whose create table reads as follows:

```sql
CREATE TABLE documents
(
	id 				bigserial 	    primary key not null,
	embedding 		vector(1024)	not null,
	text 			varchar		    not null,
	path_to_doc		varchar         not null
);
```

**Detail of the columns:**
* __id__   is an auto generated unique identifier for each chunk of text.
* __embedding__ is 1024 dimension dense vector embedding for the chunk of text.
* __text__ is the raw transcription of the (preprocessed, normalized) text that
           was used to compute the document embedding. 
* __path_to_doc__ is a string (think of a path) that should be used as a 
           reference for the users to consult and crosscheck the information
           after the final answer has been generated by the output LLM.

**Note:**
The 1024 dimension for the embedding is not arbitrary: it is imposed by the  
embedding (sentence transformer) model used to produce the documents and
query embeddings.